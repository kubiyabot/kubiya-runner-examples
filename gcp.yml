# 1.with 'gcloud auth application-default login' command
# 2.faas-cli secret create gcp-crds --from-file $HOME/.config/gcloud/credentials.json --gateway http://localhost:8080

version: 1.0
provider:
  name: openfaas
  gateway: http://localhost:8080
functions:
  gcp:
    lang: runner-template-python3
    handler: ./gcp
    image: kubiya/action-store-gcp:latest
    secrets:
      - gcp-crds
    environment:
      GOOGLE_APPLICATION_CREDENTIALS: /var/openfaas/secrets/gcp-crds
    annotations:
      topic: "gcp"